# Default values for pebbles

# Images to deploy
dbImage: centos/postgresql-95-centos7:latest
imagePrefix: ''
apiImage: pebbles:latest
workerImage: pebbles:latest

# To avoid remote pulling with local kubernetes, you can set these to 'IfNotPresent'
dbImagePullPolicy: Always
apiImagePullPolicy: Always
workerImagePullPolicy: Always

# Database volume size
databaseVolumeSize: 1Gi

# Replica counts for api and worker
apiReplicas: 1
workerReplicas: 1

# Database password. If not set, a random value is used.
#databasePassword: pebbles

# Master secret key for API. If not set, a random value is used
#pbSecretKey: unsafe_danger_danger

# To retain secrets between deployment updates, generated secret is only updated/created
# when overrideSecret is set to 'true'
#overrideSecret: false

# Ingress type can be 'Ingress' for K8s ingresses or 'Route' for OpenShift Routes
ingressType: Ingress

# Ingress host
ingressHost: localhost

# Storage class for database
#dbStorageClass: standard-rwo

# For local development, we can mount source folder from the host
#mountHostSrc: /home/user/src/github.com/CSCfi/pebbles

# To debug api, set address for callback
#remoteDebugServerApi: host.docker.internal

# To debug worker, set address for callback
#remoteDebugServerWorker: host.docker.internal

# Run api with just one thread and reload mode
#apiDevelopmentMode: true

# Disable CORS for API for local UI development
#apiDisableCORS: true

# Mount a ReadWriteMany volume as the source. Useful for remote development
#useSourceVolume: true

# Enable or disable running database automigration on API startup
#dbAutomigration: true

# Backend config is provided in local values
backendConfig: |
  - name: example

# Passwords for backends are provided in local values
backendPasswords: |
  example: "not very secret"

# ----------------------------------------------------------------------------
# Optional central logging

# deploy logstash and filebeat sidecar containers
deployCentralLogging: True

# logstashStorageClass: standard-rwo
logstashVolumeSize: 1Gi

# ----------------------------------------------------------------------------
# Optional oauth2 settings
oauth2LoginEnabled: False

# This is the shared secret between the API and the proxy. It must be defined.
#oauth2ProxySecret: change_me

# oauth2-proxy basic deployment config
oauth2ProxyReplicas: 1
oauth2ProxyImage: quay.io/pusher/oauth2_proxy:v4.1.0

# Callback URL for the proxy. The default is for local K8s deployment
oauth2ProxyRedirectUrl: http://localhost/oauth2/callback

# Client ID and Secret must be defined
#oauth2ProxyClientId: ''
#oauth2ProxyClientSecret: ''

# Optionally set a provider and issuer url. If not set, Google authentication is assumed.
#oauth2ProxyProvider: 'oidc'
#oauth2ProxyOidcIssuerUrl: 'https://test-user-auth.csc.fi'

# Set a persistent cookie secret if needed. Because only the login access to create a new session
# goes through oauth2-proxy in Pebbles, it is also ok to leave this undefined and let Helm generate
# a random value every time the deployment is upgraded.
#oauth2ProxyCookieSecret: change_me
